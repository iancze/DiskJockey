<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Changelog · DiskJockey.jl Documentation</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5472810-7"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-5472810-7', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="DiskJockey.jl Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">DiskJockey.jl Documentation</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="dynamical_mass_intro.html">Introduction</a></li><li><a class="tocitem" href="installation.html">Installation</a></li><li><a class="tocitem" href="conventions.html">Conventions</a></li><li><a class="tocitem" href="models.html">Models</a></li><li><a class="tocitem" href="formats.html">Formats</a></li><li><a class="tocitem" href="RADMC3D_setup.html">RADMC Setup</a></li><li><a class="tocitem" href="cookbook.html">Cookbook</a></li><li><a class="tocitem" href="priors.html">Priors</a></li><li><a class="tocitem" href="api.html">API</a></li><li class="is-active"><a class="tocitem" href="changelog.html">Changelog</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Version-0.1.6"><span>Version 0.1.6</span></a></li><li><a class="tocitem" href="#Splitting-package-testing"><span>Splitting package testing</span></a></li><li><a class="tocitem" href="#Github-actions"><span>Github actions</span></a></li><li><a class="tocitem" href="#Package-environment"><span>Package environment</span></a></li><li><a class="tocitem" href="#Optimization-routines"><span>Optimization routines</span></a></li><li><a class="tocitem" href="#Removed-plotly"><span>Removed plotly</span></a></li><li><a class="tocitem" href="#Total-gas-mass-vs.-surface-density-parameterization"><span>Total gas mass vs. surface density parameterization</span></a></li><li class="toplevel"><a class="tocitem" href="#Version-0.1.5"><span>Version 0.1.5</span></a></li><li class="toplevel"><a class="tocitem" href="#Version-0.1.4"><span>Version 0.1.4</span></a></li><li><a class="tocitem" href="#Updated-RADMC-3D"><span>Updated RADMC-3D</span></a></li><li><a class="tocitem" href="#Renaming"><span>Renaming</span></a></li><li><a class="tocitem" href="#DJ*plot*walkers.py"><span>DJ<em>plot</em>walkers.py</span></a></li><li><a class="tocitem" href="#DJ*verify*run.jl"><span>DJ<em>verify</em>run.jl</span></a></li><li><a class="tocitem" href="#NUKER-profile"><span>NUKER profile</span></a></li><li><a class="tocitem" href="#Distance"><span>Distance</span></a></li><li><a class="tocitem" href="#InitializeWalkers.ipynb-to-initialize_walkers.py"><span>InitializeWalkers.ipynb to initialize_walkers.py</span></a></li><li class="toplevel"><a class="tocitem" href="#Version-0.1.3"><span>Version 0.1.3</span></a></li><li><a class="tocitem" href="#Fix-parameters"><span>Fix parameters</span></a></li><li><a class="tocitem" href="#Cavity-model"><span>Cavity model</span></a></li><li><a class="tocitem" href="#Truncated-model"><span>Truncated model</span></a></li><li><a class="tocitem" href="#Change-to-Sigma_c"><span>Change to Sigma_c</span></a></li><li><a class="tocitem" href="#FITS-export"><span>FITS export</span></a></li><li><a class="tocitem" href="#spectrum.png"><span>spectrum.png</span></a></li><li><a class="tocitem" href="#Half-pixel-offset"><span>Half-pixel offset</span></a></li><li><a class="tocitem" href="#Visualizing-the-tau1-surface"><span>Visualizing the tau=1 surface</span></a></li><li><a class="tocitem" href="#Vertical-temperature-gradient"><span>Vertical temperature gradient</span></a></li><li><a class="tocitem" href="#model.convert_vector"><span>model.convert_vector</span></a></li><li><a class="tocitem" href="#User-defined-priors"><span>User-defined priors</span></a></li><li><a class="tocitem" href="#Makefiles"><span>Makefiles</span></a></li><li><a class="tocitem" href="#Script-renaming"><span>Script renaming</span></a></li><li><a class="tocitem" href="#model.Grid"><span>model.Grid</span></a></li><li class="toplevel"><a class="tocitem" href="#Version-0.1.2"><span>Version 0.1.2</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#UVHDF5"><span>UVHDF5</span></a></li><li><a class="tocitem" href="#Travis-integration"><span>Travis integration</span></a></li><li><a class="tocitem" href="#EnsembleSampler"><span>EnsembleSampler</span></a></li><li><a class="tocitem" href="#Plotly-script"><span>Plotly script</span></a></li><li><a class="tocitem" href="#DJInitialize.jl"><span>DJInitialize.jl</span></a></li><li><a class="tocitem" href="#Cavity-model-2"><span>Cavity model</span></a></li><li><a class="tocitem" href="#gridding.jl"><span>gridding.jl</span></a></li><li><a class="tocitem" href="#visibilities.jl"><span>visibilities.jl</span></a></li><li><a class="tocitem" href="#image.jl"><span>image.jl</span></a></li><li><a class="tocitem" href="#config.yaml-copied-to-output-directory"><span>config.yaml copied to output directory</span></a></li><li><a class="tocitem" href="#plot_baselines.jl"><span>plot_baselines.jl</span></a></li><li class="toplevel"><a class="tocitem" href="#Version-0.1.1"><span>Version 0.1.1</span></a></li><li><a class="tocitem" href="#Model-specification"><span>Model specification</span></a></li><li><a class="tocitem" href="#One-off-model-synthesis-and-plotting"><span>One-off model synthesis and plotting</span></a></li><li><a class="tocitem" href="#MCMC-Sampling"><span>MCMC Sampling</span></a></li><li><a class="tocitem" href="#New-Cookbook-available"><span>New Cookbook available</span></a></li><li class="toplevel"><a class="tocitem" href="#Version-0.1.0"><span>Version 0.1.0</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="changelog.html">Changelog</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="changelog.html">Changelog</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/iancze/DiskJockey/blob/main/docs/src/changelog.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Changelog"><a class="docs-heading-anchor" href="#Changelog">Changelog</a><a id="Changelog-1"></a><a class="docs-heading-anchor-permalink" href="#Changelog" title="Permalink"></a></h1><p>The following are the changes that have been implemented since the previous version. All versions are tagged as releases and available as a clone off of the master branch.</p><h1 id="Version-0.1.6"><a class="docs-heading-anchor" href="#Version-0.1.6">Version 0.1.6</a><a id="Version-0.1.6-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.6" title="Permalink"></a></h1><h2 id="Splitting-package-testing"><a class="docs-heading-anchor" href="#Splitting-package-testing">Splitting package testing</a><a id="Splitting-package-testing-1"></a><a class="docs-heading-anchor-permalink" href="#Splitting-package-testing" title="Permalink"></a></h2><p>DiskJockey is a computation and data intensive program. This makes it difficult to functionally test every aspect of the program quickly. To help create a testing funnel from quick, unit tests all the way through to larger integration tests, I&#39;ve split the tests into two places. Within the main DiskJockey package are those tests that can be done quickly and are limited to testing the code within <code>src/</code> (i.e., <em>not</em> testing <code>scripts/</code>).</p><p>The larger integration tests are split out into a different Julia package, <a href="https://github.com/iancze/DiskJockeyTests.jl">DiskJockeyTests.jl</a> that is currently under construction. The idea is that this package will be run in a cluster environment and is designed to run through the loading and analysis of an actual dataset. It is designed to catch the kind of bug that you only discover after queuing for cores for several hours.</p><h2 id="Github-actions"><a class="docs-heading-anchor" href="#Github-actions">Github actions</a><a id="Github-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Github-actions" title="Permalink"></a></h2><p>Continuous Integration testing and documentation builds are now done with Github-actions.</p><h2 id="Package-environment"><a class="docs-heading-anchor" href="#Package-environment">Package environment</a><a id="Package-environment-1"></a><a class="docs-heading-anchor-permalink" href="#Package-environment" title="Permalink"></a></h2><p>Added <code>using Pkg; Pkg.activate(&quot;DiskJockey&quot;)</code> to all of the scripts. This way, these scripts should use the versions of the packages installed along with the DiskJockey package itself, and you won&#39;t need to (re)install these same packages to your local environment.</p><h2 id="Optimization-routines"><a class="docs-heading-anchor" href="#Optimization-routines">Optimization routines</a><a id="Optimization-routines-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization-routines" title="Permalink"></a></h2><p>In addition to the normal MCMC sampling routines, we&#39;ve included the option to use an optimizer instead, via <code>BlackBoxOptim.jl</code>. This should greatly expedite getting an estimate of the &quot;best-fit&quot; model, but won&#39;t replace the need to do a full MCMC to get the posterior distributions.</p><h2 id="Removed-plotly"><a class="docs-heading-anchor" href="#Removed-plotly">Removed plotly</a><a id="Removed-plotly-1"></a><a class="docs-heading-anchor-permalink" href="#Removed-plotly" title="Permalink"></a></h2><p>Removed plotly support, since this was just adding bloat.</p><h2 id="Total-gas-mass-vs.-surface-density-parameterization"><a class="docs-heading-anchor" href="#Total-gas-mass-vs.-surface-density-parameterization">Total gas mass vs. surface density parameterization</a><a id="Total-gas-mass-vs.-surface-density-parameterization-1"></a><a class="docs-heading-anchor-permalink" href="#Total-gas-mass-vs.-surface-density-parameterization" title="Permalink"></a></h2><p>The normalization of the disk surface density profile can either be parameterized as a surface density at a given radius (often Sigma<em>c, the surface density at r</em>c) or as the total disk mass. These choices are of course equivalent, but the parameterizations have consequences for how efficiently the posterior can be sampled (M<em>gas is usually less correlated with other parameters than r</em>c) and how quickly the 3D densities can be computed (r<em>c is quicker than M</em>gas).</p><p>To get the best of both worlds, we&#39;ve added BOTH Sigma<em>c and M</em>gas to the model types, and added an outer constructer that computes Sigma<em>c from M</em>gas. From the users perspective, they should only have to interact with M<em>gas. But, this way the routines in <code>model.jl</code> can also just query Sigma</em>c each time they need it.</p><h1 id="Version-0.1.5"><a class="docs-heading-anchor" href="#Version-0.1.5">Version 0.1.5</a><a id="Version-0.1.5-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.5" title="Permalink"></a></h1><p>Updates to make everything compatible with Julia v1.0. </p><h1 id="Version-0.1.4"><a class="docs-heading-anchor" href="#Version-0.1.4">Version 0.1.4</a><a id="Version-0.1.4-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.4" title="Permalink"></a></h1><p>Upgraded to Julia version 0.6. To upgrade to this version of DiskJockey, you will first need to upgrade your own Julia distribution to 0.6 as well. I apologize for the frequent upgrades of Julia, but since Julia is itself a fast-developing language, it makes the most sense to just bite the bullet and upgrade every time the programming language upgrades as well. Once Julia reaches v1.0 (sometime in 2018, perhaps), these changes should become less frequent.</p><p>After you install the new version of Julia, make sure that it actually loads as</p><pre><code class="nohighlight hljs">$ julia
               _
   _       _ _(_)_     |  A fresh approach to technical computing
  (_)     | (_) (_)    |  Documentation: https://docs.julialang.org
   _ _   _| |_  __ _   |  Type &quot;?help&quot; for help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 0.6.1-pre.92 (2017-10-07 01:18 UTC)
 _/ |\__&#39;_|_|_|\__&#39;_|  |  Commit 389b23cf6e* (6 days old release-0.6)
|__/                   |  x86_64-pc-linux-gnu

julia&gt;</code></pre><p>And then you will need to reinstall DiskJockey in this new version, which should automatically pull down all of the other packages.</p><pre><code class="nohighlight hljs">julia&gt; Pkg.clone(&quot;https://github.com/iancze/DiskJockey.git&quot;)</code></pre><p>If you no longer plan on using Julia v0.4 or v0.5 or any of the packages, I would recommend deleting it from your system so as not to cause any PATH conflicts. Speaking of which, don&#39;t forget to update your PATH to point to the new v0.6 version scripts.</p><h2 id="Updated-RADMC-3D"><a class="docs-heading-anchor" href="#Updated-RADMC-3D">Updated RADMC-3D</a><a id="Updated-RADMC-3D-1"></a><a class="docs-heading-anchor-permalink" href="#Updated-RADMC-3D" title="Permalink"></a></h2><p>We&#39;re now running the latest version of RADMC-3D (0.41), which is automatically downloaded and installed with <code>DiskJockey</code>. Although not strictly required for running DiskJockey, it might help to familiarize yourself with the <a href="http://www.ita.uni-heidelberg.de/~dullemond/software/radmc-3d/radmc-3d_v0.41.pdf">RADMC-3D manual</a>, in particular the sections on input files and LTE line transfer.</p><h2 id="Renaming"><a class="docs-heading-anchor" href="#Renaming">Renaming</a><a id="Renaming-1"></a><a class="docs-heading-anchor-permalink" href="#Renaming" title="Permalink"></a></h2><p>The script <code>max_baseline.jl</code> is now <code>DJ_max_baseline.jl</code>. <code>plot_walkers.py</code> is now <code>DJ_plot_walkers.py</code>.</p><h2 id="DJ*plot*walkers.py"><a class="docs-heading-anchor" href="#DJ*plot*walkers.py">DJ<em>plot</em>walkers.py</a><a id="DJ*plot*walkers.py-1"></a><a class="docs-heading-anchor-permalink" href="#DJ*plot*walkers.py" title="Permalink"></a></h2><p>Now has proper labeling for models that fix parameters.</p><h2 id="DJ*verify*run.jl"><a class="docs-heading-anchor" href="#DJ*verify*run.jl">DJ<em>verify</em>run.jl</a><a id="DJ*verify*run.jl-1"></a><a class="docs-heading-anchor-permalink" href="#DJ*verify*run.jl" title="Permalink"></a></h2><p>A new script for checking that you&#39;ve specified everything properly before launching a MCMC run. This way you can avoid syntax errors in the <code>config</code> scripts after queuing for a cluster job.</p><h2 id="NUKER-profile"><a class="docs-heading-anchor" href="#NUKER-profile">NUKER profile</a><a id="NUKER-profile-1"></a><a class="docs-heading-anchor-permalink" href="#NUKER-profile" title="Permalink"></a></h2><p>We&#39;ve implemented the NUKER profile as a model for the surface density distribution. See Tripathi et al. 2017 for more details.</p><h2 id="Distance"><a class="docs-heading-anchor" href="#Distance">Distance</a><a id="Distance-1"></a><a class="docs-heading-anchor-permalink" href="#Distance" title="Permalink"></a></h2><p>We&#39;ve removed the following fields from <span>$config.yaml$</span> for all models</p><pre><code class="nohighlight hljs"># Distance prior setup
dpc_prior:
  mu : 145.
  sig : 20.</code></pre><p>The main reason is that because the dynamical mass results are completely degenerate with distance in a linear manner, it doesn&#39;t make sense to sample in distance, especially if the prior is a simple analytical form like a Gaussian. This means that the normal mode of operation will be to include <span>$&quot;dpc&quot;$</span> in the <span>$fix_params$</span> field, as is commonly done. If the users require sampling in <span>$dpc$</span>, then they can remove it from <span>$fix_params$</span> and write a prior in a custom <span>$prior.jl$</span> file.</p><h2 id="InitializeWalkers.ipynb-to-initialize_walkers.py"><a class="docs-heading-anchor" href="#InitializeWalkers.ipynb-to-initialize_walkers.py">InitializeWalkers.ipynb to initialize_walkers.py</a><a id="InitializeWalkers.ipynb-to-initialize_walkers.py-1"></a><a class="docs-heading-anchor-permalink" href="#InitializeWalkers.ipynb-to-initialize_walkers.py" title="Permalink"></a></h2><p>Rather than editing the walker initialization script with an IPython notebook, instead it is now done with a simple python script. Functionally, these are the same, but the script removes the extra startup time of a Jupyter notebook.</p><h1 id="Version-0.1.3"><a class="docs-heading-anchor" href="#Version-0.1.3">Version 0.1.3</a><a id="Version-0.1.3-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.3" title="Permalink"></a></h1><h2 id="Fix-parameters"><a class="docs-heading-anchor" href="#Fix-parameters">Fix parameters</a><a id="Fix-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Fix-parameters" title="Permalink"></a></h2><p>Now there is a flexible way to fix or free parameters in a fit.</p><p>To do this requires new config files (which you may need to copy over from <code>assets/</code>) that include a <code>params_fixed</code> field, where you list the parameters to fix. Then, it may also require modifying the <code>InitializeWalkers.ipynb</code> notebooks to incorporate more or fewer parameters than are currently available.</p><h2 id="Cavity-model"><a class="docs-heading-anchor" href="#Cavity-model">Cavity model</a><a id="Cavity-model-1"></a><a class="docs-heading-anchor-permalink" href="#Cavity-model" title="Permalink"></a></h2><p>Now supports a cavity model, with parameters for the size of the cavity (<code>r_cav</code>), as well as the steepness (<code>gamma_cav</code>).</p><h2 id="Truncated-model"><a class="docs-heading-anchor" href="#Truncated-model">Truncated model</a><a id="Truncated-model-1"></a><a class="docs-heading-anchor-permalink" href="#Truncated-model" title="Permalink"></a></h2><p>Now includes a model that has a variable outer exponential taper, allowing it to be steeper or shallower than the traditional (2 - gamma).</p><h2 id="Change-to-Sigma_c"><a class="docs-heading-anchor" href="#Change-to-Sigma_c">Change to Sigma_c</a><a id="Change-to-Sigma_c-1"></a><a class="docs-heading-anchor-permalink" href="#Change-to-Sigma_c" title="Permalink"></a></h2><p>Instead of fitting with the parameter total gas mass, we now fit with the surface density normalization at the critical radius, <code>Sigma_c</code>. Note that this only truly the normalization constant for the <code>standard</code>, <code>truncated</code>, and <code>vertical</code> models. The reason for the switch from <code>M_gas</code> to <code>Sigma_c</code> is that for more complicated models, there is no analytic formula for the total gas mass, meaning that a numerical integral would be needed for each model evaluation. It is simpler and more accurate to sample in <code>Sigma_c</code> and then later convert the samples to <code>M_gas</code> if desired.</p><h2 id="FITS-export"><a class="docs-heading-anchor" href="#FITS-export">FITS export</a><a id="FITS-export-1"></a><a class="docs-heading-anchor-permalink" href="#FITS-export" title="Permalink"></a></h2><p>Thanks to Jane Huang (@j6626), you can now export a RADMC image to a FITS file via the script <code>DJ_image_to_FITS.py</code>. You can then inspect these FITS files with <code>ds9</code>, or use them in CASA <code>simobserve</code>.</p><h2 id="spectrum.png"><a class="docs-heading-anchor" href="#spectrum.png">spectrum.png</a><a id="spectrum.png-1"></a><a class="docs-heading-anchor-permalink" href="#spectrum.png" title="Permalink"></a></h2><p>The plotting routine now outputs integrated line flux, to be used as a sanity check against the measured value from a dataset.</p><h2 id="Half-pixel-offset"><a class="docs-heading-anchor" href="#Half-pixel-offset">Half-pixel offset</a><a id="Half-pixel-offset-1"></a><a class="docs-heading-anchor-permalink" href="#Half-pixel-offset" title="Permalink"></a></h2><p>Has now been added to the code. This is a result from that RADMC synthesizes an image centered on <code>(0,0)</code>, while the FFT routine expects the image to be centered on the middle of the central pixel. The only change you should see is a small, half-pixel sized offset in <code>mu_RA</code> and <code>mu_DEC</code>.</p><h2 id="Visualizing-the-tau1-surface"><a class="docs-heading-anchor" href="#Visualizing-the-tau1-surface">Visualizing the tau=1 surface</a><a id="Visualizing-the-tau1-surface-1"></a><a class="docs-heading-anchor-permalink" href="#Visualizing-the-tau1-surface" title="Permalink"></a></h2><p>This functionality originally provided in RADMC is now exposed via DiskJockey to visualize the tau = 1 (or other value) surface.</p><p>$ DJ<em>initialize.jl &amp;&amp; tausurf</em>model.jl &amp;&amp; plot_tausurf.jl</p><p>This also introduces the <code>TausurfImage</code> type in <code>src/image.jl</code>. This is useful to see whether the tau=1 surface is in front of or behind the midplane of the disk, projected on the sky.</p><p>It will be more useful to plot this in 3D, however. ParaView export is hopefully coming in a future version.</p><h2 id="Vertical-temperature-gradient"><a class="docs-heading-anchor" href="#Vertical-temperature-gradient">Vertical temperature gradient</a><a id="Vertical-temperature-gradient-1"></a><a class="docs-heading-anchor-permalink" href="#Vertical-temperature-gradient" title="Permalink"></a></h2><p>We now include support for fitting a vertical temperature gradient, via the <code>vertical</code> model type. We follow the parameterization in <a href="https://ui.adsabs.harvard.edu/#abs/2014ApJ...788...59W/abstract">Williams and Best 14</a>.</p><h2 id="model.convert_vector"><a class="docs-heading-anchor" href="#model.convert_vector">model.convert_vector</a><a id="model.convert_vector-1"></a><a class="docs-heading-anchor-permalink" href="#model.convert_vector" title="Permalink"></a></h2><p>This routine is to simplify to ingesting <em>kwargs</em>, enabling easier selection of model types and parameters.</p><h2 id="User-defined-priors"><a class="docs-heading-anchor" href="#User-defined-priors">User-defined priors</a><a id="User-defined-priors-1"></a><a class="docs-heading-anchor-permalink" href="#User-defined-priors" title="Permalink"></a></h2><p>As an experimental feature, it is now possible to assign user defined priors. This will require you to write some Julia code, but shouldn&#39;t be that difficult. An example is in <code>assets/prior.jl</code>, which will be read automatically from the current working directory. The main idea is to make it easier to assign disk-specific priors (i.e., constrain the disk gas mass to a specific value, or disk position, etc...).</p><h2 id="Makefiles"><a class="docs-heading-anchor" href="#Makefiles">Makefiles</a><a id="Makefiles-1"></a><a class="docs-heading-anchor-permalink" href="#Makefiles" title="Permalink"></a></h2><p>Now, we include a makefile that should be copied to each source directory. In a typical analysis workflow, there isn&#39;t need to regenerate each intermediate product repeatedly. Details are in the cookbook.</p><h2 id="Script-renaming"><a class="docs-heading-anchor" href="#Script-renaming">Script renaming</a><a id="Script-renaming-1"></a><a class="docs-heading-anchor-permalink" href="#Script-renaming" title="Permalink"></a></h2><p>To prevent these scripts from cluttering a users namespace when adding to their <code>PATH</code>, we&#39;ve prefixed most things with <code>DJ_</code>. Moreover, for most tasks, the users will not need to run these tasks directly, but will just use the Makefile.</p><h2 id="model.Grid"><a class="docs-heading-anchor" href="#model.Grid">model.Grid</a><a id="model.Grid-1"></a><a class="docs-heading-anchor-permalink" href="#model.Grid" title="Permalink"></a></h2><p><code>Grid</code> type initialization now relies upon a dictionary.</p><h1 id="Version-0.1.2"><a class="docs-heading-anchor" href="#Version-0.1.2">Version 0.1.2</a><a id="Version-0.1.2-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.2" title="Permalink"></a></h1><p>The package is now named DiskJockey (previously JudithExcalibur). Check out the new logo!</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>The README now provides installation instructions for tagged releases. Rather than requiring the user to install it separately, RADMC-3D is now installed automatically as part of the installation process.</p><h2 id="UVHDF5"><a class="docs-heading-anchor" href="#UVHDF5">UVHDF5</a><a id="UVHDF5-1"></a><a class="docs-heading-anchor-permalink" href="#UVHDF5" title="Permalink"></a></h2><p>Conversion from UVFITS and CASA measurement set was previously handled by scripts in this repository. However, this import and export capability has be standardized via the <a href="https://github.com/Astrochem/UVHDF5">UVHDF5</a> package. Please see that package for any issues with import and export.</p><h2 id="Travis-integration"><a class="docs-heading-anchor" href="#Travis-integration">Travis integration</a><a id="Travis-integration-1"></a><a class="docs-heading-anchor-permalink" href="#Travis-integration" title="Permalink"></a></h2><p>Now the builds are tested on travis-ci, which should hopefully increase stability for the development cycle.</p><h2 id="EnsembleSampler"><a class="docs-heading-anchor" href="#EnsembleSampler">EnsembleSampler</a><a id="EnsembleSampler-1"></a><a class="docs-heading-anchor-permalink" href="#EnsembleSampler" title="Permalink"></a></h2><p>There is now an <code>expand_walkers.py</code> script, designed to add the <code>dpc</code> dimension to the sampling routine from an ensemble of walkers used on a posterior with distance fixed.</p><p>Now the ensemble sampler takes an optional function, to be called at the end of each loop as <code>func(sampler, outdir)</code></p><pre><code class="nohighlight hljs">function run_schedule(sampler::Sampler, pos0, N::Int, loops::Int, outdir, func::Function=nothing)</code></pre><p>See the <code>src/EnsembleSampler.jl</code> file for more details. This is primarily in support of the next feature...</p><h2 id="Plotly-script"><a class="docs-heading-anchor" href="#Plotly-script">Plotly script</a><a id="Plotly-script-1"></a><a class="docs-heading-anchor-permalink" href="#Plotly-script" title="Permalink"></a></h2><p>If you run the sampling script as</p><pre><code class="nohighlight hljs">$ venus.jl --plotly</code></pre><p>Then after the completion of each sampling loop, this will create a plotly walkers plot corresponding to the <code>name</code> entry in <code>config.yaml</code>. This allows easy monitoring of many different chains that might be running on a cluster.</p><h2 id="DJInitialize.jl"><a class="docs-heading-anchor" href="#DJInitialize.jl">DJInitialize.jl</a><a id="DJInitialize.jl-1"></a><a class="docs-heading-anchor-permalink" href="#DJInitialize.jl" title="Permalink"></a></h2><p>(Previously JudithInitialize.jl). Now this initialization script can easily spit out an <code>exclude</code> array so that fewer channels can be fit during initial testing.</p><h2 id="Cavity-model-2"><a class="docs-heading-anchor" href="#Cavity-model-2">Cavity model</a><a class="docs-heading-anchor-permalink" href="#Cavity-model-2" title="Permalink"></a></h2><p>By initializing a directory with</p><pre><code class="nohighlight hljs">$ DJInitialize.jl --new-project=cavity</code></pre><p>you can start exploring the <code>cavity</code> model, which has an exponential taper inside of some radius, <code>r_cav</code>.</p><h2 id="gridding.jl"><a class="docs-heading-anchor" href="#gridding.jl">gridding.jl</a><a id="gridding.jl-1"></a><a class="docs-heading-anchor-permalink" href="#gridding.jl" title="Permalink"></a></h2><p><code>gridding.jl</code> now exports a <code>corrfun(img::SkyImage)</code> routine, in addition to <code>corrfun!(img::SkyImage)</code>. This new function returns a corrected image as a copy, leaving the original image in the arguments unchanged. This is useful for plotting and debugging scripts so that you don&#39;t need to copy the image manually.</p><h2 id="visibilities.jl"><a class="docs-heading-anchor" href="#visibilities.jl">visibilities.jl</a><a id="visibilities.jl-1"></a><a class="docs-heading-anchor-permalink" href="#visibilities.jl" title="Permalink"></a></h2><p><code>FullModelVis</code> now has a <code>-</code> method, which can be used to subtract two sets of dense visibilities.</p><h2 id="image.jl"><a class="docs-heading-anchor" href="#image.jl">image.jl</a><a id="image.jl-1"></a><a class="docs-heading-anchor-permalink" href="#image.jl" title="Permalink"></a></h2><p><code>Image</code> now has a <code>-</code> method, which can be used to subtract two images.</p><h2 id="config.yaml-copied-to-output-directory"><a class="docs-heading-anchor" href="#config.yaml-copied-to-output-directory">config.yaml copied to output directory</a><a id="config.yaml-copied-to-output-directory-1"></a><a class="docs-heading-anchor-permalink" href="#config.yaml-copied-to-output-directory" title="Permalink"></a></h2><p>Now <code>venus.jl</code> will move a copy of your <code>config.yaml</code> file to the output directory. This creates an automatic record of what parameters you ran with, which will undoubtedly be useful when reviewing previous runs sometime in the near future. Default values in the initial <code>config.yaml</code> files have also been updated.</p><h2 id="plot_baselines.jl"><a class="docs-heading-anchor" href="#plot_baselines.jl">plot_baselines.jl</a><a id="plot_baselines.jl-1"></a><a class="docs-heading-anchor-permalink" href="#plot_baselines.jl" title="Permalink"></a></h2><p>Will generate a plot of where your dataset has sampled the UV plane. Also will print out an average velocity of the dataset, to allow a good starting guess for the <code>vel</code> parameter.</p><h1 id="Version-0.1.1"><a class="docs-heading-anchor" href="#Version-0.1.1">Version 0.1.1</a><a id="Version-0.1.1-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.1" title="Permalink"></a></h1><h2 id="Model-specification"><a class="docs-heading-anchor" href="#Model-specification">Model specification</a><a id="Model-specification-1"></a><a class="docs-heading-anchor-permalink" href="#Model-specification" title="Permalink"></a></h2><p>New implementation of models through parameter types in <code>model.jl</code>. Instead of separate model files for each new parameterization, which duplicated a lot of code and made things difficult to maintain, we are now collating all model types in <code>model.jl</code> by their parameters. We have created the <code>AbstractParameters</code> umbrella type, with subtypes <code>ParametersStandard</code>, <code>ParametersTruncated</code>, and <code>ParametersCavity</code>. Previous model specification routines like <code>Sigma(r::Float64, pars::Parameters)</code> (surface density) are now have overloaded methods for different models based upon these parameter types</p><pre><code class="nohighlight hljs">Sigma(r::Float64, pars::ParametersStandard)
Sigma(r::Float64, pars::ParametersTruncated)
Sigma(r::Float64, pars::ParametersCavity)</code></pre><p>And routines that are general to all models (e.g. velocity specification) are denoted by</p><pre><code class="nohighlight hljs">velocity{T}(r::T, pars::AbstractParameters)</code></pre><p>Note that model types <code>cavity</code> and <code>truncated</code> are still experimental and likely to change.</p><p>To go along with this change, I have updated the automatic generation of the <code>config.yaml</code> file to include new fields like <code>model: standard</code>. Within the <code>config.yaml</code> file, items in the <code>parameters</code> dictionary are now simply a single Float64 number, not an array of <code>[starting, jump]</code> like it was previously.</p><p><code>model.jl</code> now handles the implementation of priors, that dispatch off of the parameter types. This greatly streamlines the function <code>fprob</code> in <code>venus.jl</code>.</p><h2 id="One-off-model-synthesis-and-plotting"><a class="docs-heading-anchor" href="#One-off-model-synthesis-and-plotting">One-off model synthesis and plotting</a><a id="One-off-model-synthesis-and-plotting-1"></a><a class="docs-heading-anchor-permalink" href="#One-off-model-synthesis-and-plotting" title="Permalink"></a></h2><p>I&#39;ve simplified synthesizing and plotting of models. What was previously <code>plot_model.jl</code> is now split into <code>synthesize_model.jl</code> and <code>plot_chmaps.jl</code>.</p><p>Added new <code>plot_moments.jl</code> script which plots the zeroth-moment image. Soon it will plot first moment as well.</p><h2 id="MCMC-Sampling"><a class="docs-heading-anchor" href="#MCMC-Sampling">MCMC Sampling</a><a id="MCMC-Sampling-1"></a><a class="docs-heading-anchor-permalink" href="#MCMC-Sampling" title="Permalink"></a></h2><p>The specification of parameter types allowed me to greatly simplify the MCMC sampling code into a single script, <code>venus.jl</code>. I have moved previous sampling scripts to the <code>attic/</code> directory.</p><p>Created <code>InitializeWalkers.ipynb</code> that is copied to new directory to help specify walker starting positions. The user edits this with a Jupyter/IPython notebook.</p><h2 id="New-Cookbook-available"><a class="docs-heading-anchor" href="#New-Cookbook-available">New Cookbook available</a><a id="New-Cookbook-available-1"></a><a class="docs-heading-anchor-permalink" href="#New-Cookbook-available" title="Permalink"></a></h2><p>We now have a <a href="cookbook.html#Cookbook">Cookbook</a> for AK Sco, check it out to get started!</p><p><code>plot_walkers.py</code> now includes ability to determine highest density interval for quoting credible intervals and should automatically label the parameters after reading from <code>config.yaml</code>.</p><h1 id="Version-0.1.0"><a class="docs-heading-anchor" href="#Version-0.1.0">Version 0.1.0</a><a id="Version-0.1.0-1"></a><a class="docs-heading-anchor-permalink" href="#Version-0.1.0" title="Permalink"></a></h1><p>Initial commit on the new versioning roadmap.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="api.html">« API</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.21 on <span class="colophon-date" title="Monday 18 July 2022 09:27">Monday 18 July 2022</span>. Using Julia version 1.6.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
